"use strict";(self.webpackChunkcourses_for_genesis=self.webpackChunkcourses_for_genesis||[]).push([[224],{224:function(e,n,r){r.r(n),r.d(n,{default:function(){return E}});var t=r(9439),s=r(2791),o=r(1413),a=r(6934),i=r(890),c=r(2169),u=r(4554),l=r(4942),d=r(6710),h=function(e,n){try{var r=JSON.stringify(n);localStorage.setItem(e,r)}catch(t){console.error("Set state error: ",t.message)}},p=function(e){try{var n=localStorage.getItem(e);return null===n?void 0:JSON.parse(n)}catch(r){console.error("Get state error: ",r.message)}},g=r(184),f=function(e){var n=e.URL,r=e.muted,t=(0,s.useRef)(null);return(0,g.jsx)(d.Z,{url:n,width:"100%",height:"100%",playing:!0,loop:!0,muted:r,controls:!0,onProgress:function(e){var r=p("videoProgress")||{};r[n]=e.playedSeconds,h("videoProgress",r)},onReady:function(){return t.current.seekTo(function(){var e=p("videoProgress");if(e)return-1===Object.keys(e).indexOf(n)?0:parseFloat(e[n])}())},onEnded:function(){h("videoProgress",(0,l.Z)({},n,0))},onError:function(e){console.log("An error occurred:",e)},ref:t})},x=(0,a.ZP)("div",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var n=e.theme,r=e.open,t=e.drawerwidth;return(0,o.Z)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"20px",flexGrow:1,padding:n.spacing(3),paddingTop:64,transition:n.transitions.create("margin",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),marginRight:0},r&&{transition:n.transitions.create("margin",{easing:n.transitions.easing.easeOut,duration:n.transitions.duration.enteringScreen}),marginRight:t})})),v=function(e){var n=e.course,r=e.usedData;return(0,g.jsxs)(x,{open:r.isOpen,drawerwidth:r.drawerWidth,children:[(0,g.jsx)(c.Z,{component:"img",src:"".concat(n.previewImageLink,"/cover.webp"),width:"100%",height:"250px",alt:n.title,style:{display:"block",objectFit:"contain"}}),(0,g.jsxs)(i.Z,{variant:"h3",component:"h2",children:['"',n.title,'"']}),(0,g.jsx)(i.Z,{align:"justify",paragraph:!0,children:n.description}),(0,g.jsx)(u.Z,{style:{width:750,height:350},children:(0,g.jsx)(f,{URL:"https://cors-proxy.fringe.zone/".concat(n.lessons[r.lesson].link),muted:!1})}),(0,g.jsxs)(i.Z,{variant:"h4",component:"h4",children:["Lesson ",n.lessons[r.lesson].order,': "',n.lessons[r.lesson].title,'"']})]})},m=r(43),Z=r(7689),w=r(4663),j=r(3400),y=r(9791),k=r(7924),b=r(493),C=r(4852),O=r(8008),D=r(1009),L=r(8996),P=r(7621),S=r(9504),R=r(6647),F=function(e){var n=e.lessonData,r=e.handleLessonsChange,o=e.index,a=(0,s.useState)(!1),l=(0,t.Z)(a,2),h=l[0],p=l[1];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(i.Z,{gutterBottom:!0,variant:"h5",component:"h3",children:["Lesson ",n.order]}),(0,g.jsx)(P.Z,{sx:{maxWidth:345},onMouseEnter:function(){return p(!0)},onMouseLeave:function(){return p(!1)},children:(0,g.jsxs)(R.Z,{onClick:function(){r(o)},children:[(0,g.jsx)(u.Z,{sx:{width:300,height:150},children:h&&"locked"!==n.status?(0,g.jsx)(d.Z,{url:"https://cors-proxy.fringe.zone/".concat(n.link),playing:h,loop:h,muted:!0,controls:!1,width:"100%",height:"100%"}):(0,g.jsx)(c.Z,{component:"img",width:"100%",height:"100%",image:"".concat(n.previewImageLink,"/lesson-").concat(n.order,".webp"),alt:"lesson-".concat(n.order),style:{display:"block"}})}),(0,g.jsxs)(S.Z,{children:[(0,g.jsxs)(i.Z,{gutterBottom:!0,variant:"h6",component:"h3",align:"center",children:['"',n.title,'"']}),(0,g.jsx)(i.Z,{variant:"body2",color:"text.secondary",children:n.status})]})]})})]})},I=(0,a.ZP)("div")((function(e){var n=e.theme;return(0,o.Z)((0,o.Z)({display:"flex",alignItems:"center",padding:n.spacing(0,1)},n.mixins.toolbar),{},{justifyContent:"flex-start"})}));var W=function(e){var n=e.usedData,r=e.course,t=e.handleLessonsChange;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(w.Z,{style:{position:"absolute",right:8,top:0,gap:16},children:[(0,g.jsx)(i.Z,{variant:"h6",noWrap:!0,sx:{flexGrow:1},component:"div",children:"Lessons"}),(0,g.jsx)(j.Z,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:n.handleDrawerOpen,sx:(0,o.Z)({},n.isOpen&&{display:"none"}),children:(0,g.jsx)(O.Z,{})})]}),(0,g.jsxs)(y.ZP,{sx:{width:n.drawerWidth,flexShrink:0,"& .MuiDrawer-paper":{width:n.drawerWidth}},variant:"persistent",anchor:"right",open:n.isOpen,children:[(0,g.jsx)(I,{children:(0,g.jsx)(j.Z,{onClick:n.handleDrawerClose,children:"rtl"===n.theme.direction?(0,g.jsx)(D.Z,{}):(0,g.jsx)(L.Z,{})})}),(0,g.jsx)(k.Z,{}),(0,g.jsx)(b.Z,{children:r.lessons.map((function(e,n){return(0,g.jsx)(C.ZP,{style:{display:"flex",flexDirection:"column"},children:(0,g.jsx)(F,{index:n,lessonData:e,handleLessonsChange:t})},e.id)}))})]})]})},z=r(3967),E=function(){var e=(0,s.useState)(null),n=(0,t.Z)(e,2),r=n[0],o=n[1],a=(0,s.useState)(!0),i=(0,t.Z)(a,2),c=i[0],u=i[1],l=(0,s.useState)(0),d=(0,t.Z)(l,2),f=d[0],x=d[1],w=(0,Z.UO)().courseId;(0,s.useEffect)((function(){(0,m.XR)(w).then((function(e){console.log(e),o(e);var n=p("lessonProgress");n&&-1!==Object.keys(n).indexOf(w)&&x(n[w])}))}),[w]);var j={isOpen:c,handleDrawerOpen:function(){u(!0)},handleDrawerClose:function(){u(!1)},drawerWidth:340,theme:(0,z.Z)(),lesson:f};return(0,g.jsx)(g.Fragment,{children:r&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(W,{course:r,usedData:j,handleLessonsChange:function(e){var n=p("lessonProgress")||{};n[w]=e,h("lessonProgress",n),x(e)}}),(0,g.jsx)(v,{course:r,usedData:j})]})})}},43:function(e,n,r){r.d(n,{XR:function(){return u},CA:function(){return c}});var t=r(4165),s=r(5861),o=r(1243).Z.create({baseURL:"https://cors-proxy.fringe.zone/http://api.wisey.app/api/v1/"}),a=function(e){if(e)return o.defaults.headers.common.authorization="Bearer ".concat(e);o.defaults.headers.common.authorization=""},i=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.get("/auth/anonymous?platform=subscriptions");case 3:n=e.sent,r=n.data.token,a(r),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(0),console.log(e.t0.message),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var n,r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i();case 3:return e.next=5,o.get("/core/preview-courses");case 5:return n=e.sent,r=n.data,e.abrupt("return",r.courses);case 10:throw e.prev=10,e.t0=e.catch(0),console.log(e.t0.message),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n){var r,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i();case 3:return e.next=5,o.get("/core/preview-courses/".concat(n));case 5:return r=e.sent,s=r.data,e.abrupt("return",s);case 10:throw e.prev=10,e.t0=e.catch(0),console.log(e.t0.message),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=224.0ad1da19.chunk.js.map